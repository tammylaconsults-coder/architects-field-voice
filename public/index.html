<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Architects Field Voice</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; background: #f0f8ff; color: #222; }
    textarea { width: 100%; height: 100px; margin-bottom: 1rem; padding: 0.5rem; font-size: 1rem; }
    button { padding: 0.5rem 1rem; font-size: 1rem; margin-right: 1rem; cursor: pointer; }
    #reply { margin-top: 1rem; padding: 1rem; background: #e0f7fa; border-radius: 8px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Unified Field Voice</h1>
  <textarea id="message" placeholder="Speak your message to the Unified Field..."></textarea>
  <br>
  <button id="sendText">Send Text</button>
  <button id="sendVoice">Send & Play Voice</button>
  <div id="reply"></div>

  <script>
    const messageInput = document.getElementById("message");
    const replyDiv = document.getElementById("reply");

    async function sendText() {
      const msg = messageInput.value.trim();
      if (!msg) return;
      const res = await fetch("/unified-text", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg })
      });
      const data = await res.json();
      replyDiv.textContent = data.reply || "No response.";
    }

    async function sendVoice() {
      const msg = messageInput.value.trim();
      if (!msg) return;
      const resText = await fetch("/unified-text", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg })
      });
      const dataText = await resText.json();
      replyDiv.textContent = dataText.reply || "No response.";

      // Play voice
      const resVoice = await fetch("/unified-voice", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: dataText.reply })
      });
      const audioBlob = await resVoice.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      audio.play();
    }

    document.getElementById("sendText").addEventListener("click", sendText);
    document.getElementById("sendVoice").addEventListener("click", sendVoice);
  </script>
</b
